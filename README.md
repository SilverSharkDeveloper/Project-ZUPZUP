# ZUPZUP SpringBoot 프로젝트 : 로컬크리에이터의 플로깅 주최를 통한 환경 보호와 지역경제 활성화 프로젝트

## 🖥️ 프로젝트 소개
각 지역의 거주민이 로컬크리에이터가 되어 플로깅을 주최하고 사용자는 참여함으로써 지역 환경 보호와 참여로 인한 포인트로 지역에서 사용할 수 있는 쿠폰 교환을 제공해 지역 경제 또한 활성화할 수 있는 서비스
## ✨ 기획배경
도로나 특히 여행지의 길에 여행객들이 몰리며 쓰레기를 아무데나 투기해 거리가 점점 더러워지고있다. 쓰레기를 줍는 활동이 봉사의 느낌이 강해 일반인의 참여가 꺼려지는 것 같아 조금더 친화적으로 다가갈 수 없는 방법이 없을까 하다가 기획하게 되었다.

<br>

### 코로나 이후 여행객에 의한 쓰레기 더미
<img width="900"  src="https://github.com/SilverSharkDeveloper/floc/assets/129861299/969a15c3-0a65-4316-a9e3-95ae9cc20faa">



<br>

## 🕰️개발 기간
* 23.05.03 - 23.06.01

## 🧑‍🤝‍🧑 맴버구성 - 퍼블리싱 업무
 - 팀장  : 이민형 - 마이페이지,플로깅 목록 및 상세보기
 - 부팀장 : 허은상 -헤더푸터,플로깅 신청서 작성폼,상품목록,상품상세,로그인,회원가입
 - 팀원1 : 김진영 - 관리자페이지
 - 팀원2 : 김광민 - 메인페이지

## 🧑‍🤝‍🧑 맴버구성 - 백엔드 업무
 - 팀장  : 이민형 - 마이페이지
 - 부팀장 : 허은상 - 회원가입,로그인,상품목록,쿠폰교환,헤더푸터
 - 팀원1 : 김도은 - 플로깅목록,상세보기
 - 팀원2 : 김진영 - 플로깅 후기목록, 상세보기, 메인페이지
 - 팀원3 : 김광민 - 관리자페이지
 
 
 ## ✨ 프로젝트 목적 
  봉사활동이라는 무거운 느낌보다 플로깅 참여를 통해 운동과 환경보호를 다잡고 참여 보상을 통해 지역에서 사용할 수 있는 쿠폰을 얻음으로써 지역경제 활성화에 이바지함

 <img width="864" alt="image" src="https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/c8ca872c-e647-4d37-b3e5-1f46b2f2601b">



 ## ✨ 목적 및 기대 효과
  1. 사용자 누구든 될 수 있는 로컬크리에이터 플로깅 주최를 통해 사용자 지역의 환경보호 가능
  2. 다양한 사람들의 플로깅 참여를 통한 커뮤니티 형성
  3. 플로깅 주최 또는 참여를 통한 리워드로 지역에서 사용할 수 있는 쿠폰 교환 가능 -> 지역경제 활성화
  4. 운동과 환경보호를 모두 잡고 보람을 느끼며 보상을 통해 사용자의 참여를 독려

 <img width="813" alt="image" src="https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/3d8e3816-911a-4c96-844b-38f2a461164f">


## 개발 환경
- java
- jQuery
- Thymeleaf
- Spring Boot
- HTML, CSS, JS
- Oracle
- JDK 11.0.15
- YAML
- JSON
- REST:API
- Sourcetree
- DBeaver
- IntelliJ IDEA
- git, gitHub
- JUnit5
- POSTMAN
- Lombok
- Naver OAuth
- Kakao OAuth
- Google Recaptcha V3
- QRcode generator
- Email Api

 ## 📌 프로젝트에서 맡은 역할 
- 프로젝트 부팀장, 서비스 기획 및 전반적인 구성, 엔티티(ERD) 설계
- 퍼블리싱 업무 : 관리자페이지,헤더푸터,플로깅 신청서 작성폼
- 백엔드 업무 :  회원가입,로그인,상품목록,쿠폰교환,헤더푸터
- aws 서버 배포

### 퍼블리싱 작업(관리자페이지)
 1. 로그인,회원가입 <br>
 2. 플로깅 신청서 <br>
 3. 플로깅 리뷰 작성 <br>
 4. 상품 목록, 상세보기<br>
 
## 실제 화면
 <details >
  <summary style="font-size: 100 px;">화면 구성</summary>
  
![001](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/83d7859d-a767-45bb-938f-ff1f7e97cad5)
![002](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/c9f78bcd-48bd-4a70-b6ce-10839c83e50e)
![003](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/cae12027-6a31-463e-901e-5229c3c97f9f)
![004](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/ce09fc6d-a777-4708-a564-c73212ba3ee6)
![005](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/a75b9813-a95f-471d-b74d-7868fd254633)
![006](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/d1720821-df99-491f-bafb-c5c7bb021a63)
![007](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/e8e0954d-6b38-46b8-934d-4d1f6cf10f26)
![008](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/630017ad-d36b-44f7-bb73-358d40f4eeb9)
![009](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/7a140aad-d47f-498d-ba54-36b83dba2ac9)
![010](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/5cde4ee1-36b-447a-8d04-343b31820e64)
![011](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/1fec31e9-805d-4766-9e6c-819d8b6f9b12)
![012](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/f87c5b87-f7d2-4486-a638-adae9a125daa)
![013](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/58f8a2e6-0b06-4ae9-88d9-d67bc9c3d044)
![014](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/99e62380-b964-420d-931e-993447424c25)
![015](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/b53bfffc-8ba2-45d5-82b7-9d0a0778c3b8)




 
</details>

### 백엔드 작업(관리자 페이지,공지사항) 
 1. 회원가입<br>
 2. 로그인(카카오,네이버,이메일)
 3. 상품목록(스크랩)
 4. 상품 상세보기
 5. 쿠폰 교환(qr코드)

## Backend-FlowChart
 <details >
  <summary style="font-size: 100 px;">플로우차트</summary>

![001](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/2963c0f0-f82c-4b30-b0e1-68c95663b0f1)
![002](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/dcc2fe03-287a-4191-81df-9923ec703592)
![003](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/cffadd1f-0fef-46f5-a551-4241f4b8e31b)
![004](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/e95a2fc4-d515-4ea7-b7e6-52b5bd6f640b)
![005](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/283ba124-e6fd-49fa-8c7c-6f10be426c83)
![006](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/c5108297-076d-4db9-8f33-74d930c52a42)
![007](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/b602fbac-6ca6-43f6-a67b-2e88b8131da1)
![008](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/de260955-0c6f-4d30-8b30-c561685dc9b3)
![009](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/1e5e72b4-2b16-4049-adc2-07b9b1437b85)
![010](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/9e2ad5c1-8057-4521-825c-58f1ed6db98c)
![011](https://github.com/SilverSharkDeveloper/Project-ZUPZUP/assets/129861299/13087c38-593c-43e6-9cf0-dbc494e2ef38)


   



 
</details>

## ✨ 페이지흐름도


<img width="1025" alt="페이지 흐름도" src="https://github.com/SilverSharkDeveloper/floc/assets/129861299/8c92068f-d831-4852-8243-8dee74706998">




## ✨ ERD
<img width="1025"  src="https://github.com/SilverSharkDeveloper/floc/assets/129861299/46d863fa-c691-4b1b-9730-9630949db7b6">




## ✨ 프로젝트에서 느낀점
#### ✨어려웠던 부분에서 문제를 해결한 과정 <br>
1.이번 프로젝트는 엔티티 설계시 최대한 중복을 제거하고 슈퍼키와 서브키를 사용해 DB를 설계했다.
하지만 대부분의 테이블을 정규화해 만들어 놓으니 일단 테이블의 갯수가 너무 많아졌고 데이터를 가져올때 조인을 너무많이써아하며 데이터를 넣어줄때도 여러번 각 테이블별로 인서트 해주어야했다.<br>
무조건 중복을 제거하고 정규화 할수록 좋다고 생각했는데 막상 사용할때는 불편한점 투성이였다.
<br><br>

##### 해결 과정 <br>
사용할때 정규화한 테이블에 불편함을 느끼며 다시 엔티티를 수정하였다. 1:1 관계의 테이블은 반정규화를 통해 테이블을 하나로 합쳤고 1:N관계에서는 테이블을 1:1매칭 시킨후 중복되는 컬럼이 존재하는 테이블이 없다면 슈퍼키와 서브키를 사용하지 않았다.<br>
이를통해 테이블의 컬럼중복은 최소화하며 사용하는 자바쪽에서도 불편하지 않게 가다듬었다.
<br><br>

2.로그인 회원가입 방법이 여러개가 존재하면서 데이터를 관리하는데에 어려움을 겪었다.<br>
먼저 회원 로그인시 이메일 인증을 받아야하는데 같은 이메일을 사용하는 카카오 또는 네이버 아이디에 다른사용자가 있다면 그 이메일로는 회원가입이 불가했다.
방법이 여러개인 만큼 너무많은 경우의 수가 생기고 설계방법도 다양했으며 데이터 관리도 어떻게해야할지 막막했다.
<br><br>
##### 해결 과정 <br>
회원 테이블에 loginType이라는 컬럼을 추가해 KAKAO 또는 NAVER 일반인경우 NORMAL로 사용하고 타입이 KAKAO 또는 NAVER인 회원이 로그인시 로그인할때마다 Oauth를 통해 가져온 데이터로 회원 정보를 업데이트 되게끔 설계하였다.
<br>
이를통해 한 카카오나 네이버쪽 회원수정이 반영되며 일반 계정인 경우 마이페이지쪽에 카카오나 네이버로 연동할 수 있게끔 설계하여 문제를 해결했다.<br><br>

3.쿠폰 교환시 qr코드를 발급하고 이를 사용하여 쿠폰을 교환할 수 있도록 설계하였는데 이부분에서 어려움을 많이 겪었다.
<br>
먼저 각 과정을 어떻게 할지도 막막했지만 qr코드 생성해 발급하는것 까지는 가능했는데 쿠폰을 클릭하면 qrcode를 생성하는 url로 요청을보내 응답받았다.
여기서 첫번째 문제는 qrcode가 정확히 그 상품을 인지해야하는데 상품id를 전달한다면 사용자가 아닌 다른사람이 접근할 수 도 있는 문제가 있었다.
이 문제 같은 경우는 서비스 쪽에서 uuid를 생성해 qrcode path에 붙여줌으로써 정확히 그사람의 쿠폰을 인식하도록 하였다.
두번째 문제는 사용하는 쪽이였다. 보통 qr코드를 사용할때는 사용자와 인식자가 있는데 여기서 인식자가 사용자의  qr코드를 인식해 내가 만들어놓은 컨트롤러로 들어오게 하려면
인식자 또한 내 서버로 접근할 수 있어야하는데 우리 프로젝트 개발환경은 local에서 진행했으므로 이부분이 굉장히 힘들었다.
<br>
##### 해결 과정 <br>
local 서버에 다른 로컬이 접속할 수 있는 방법으로 이를 해결하였는데 먼저 공용 ip가 필요했다.<br>
따라서 핸드폰으로 핫스팟을 켜 localhost ip와 인식자의 핸드폰 local ip를 접속해 맞춰주고 인식할 수 있게끔 하였다.<br>
여기서 또 어려웠던 점이 어디에나 있는 카페나 공용 오피스의 공용 와이파이 같은 경우는 내부적으로 ip에 접근할 수 없게 설계되어있는 것 같았다.
이부분은 추후에 더 네트워크와 연관지어 공부해보고 싶다. <br><br>




##### ✨총평 
이번 프로젝트에는 스프링부트를 사용하는 만큼 그전 프로젝트에서 해보지 못했던 많은 기능들을 만들어보고 싶었다.<br>
카카오나 네이버를 연동한 Oauth를 처음 접하게 되었는데 사용하는것 까진 문제가 없었지만 시큐리티나 더 많은 활용 가능성에 대해서는 더 공부해야할 것 같았다.<br>
구글에 리캡챠도 사용해 보았는데 비정상적인 봇의 활동을 감지하면 구글쪽에서 나에게 알려줄 수 있었고 이를 통해 핸들링이 가능했다. 하지만 핸들러또한 학습이 부족해 특별히 처리는 해주지 못하였다.
이부분도 더 공부해보고 싶다.
<br>
3tier와 mvc2모델 그리고 마이바티스 api를 사용해 이번 프로젝트를 진행했는데 다음 프로젝트는 3 tier중 Persistence Tier인 영속계층에 데이터 접근 방식에서 불편함을 조금 느껴
상위 기술인 JPA를 활용해 영속계층에서 더많은 것을 다뤄보고 싶다.
<br><br>
지금까지 같이 프로젝트를 진행한 팀원들과 여러 일이 있었지만 너무 재밌었고 미안함과 감사함을 느낀다. 이제는 서로 떨어지지만 각자의 위치에서 더 성장해 다시 만나 또 재밌는 프로젝트를 진행하고싶다. 그 땐 각자의 성장을 바탕으로 기술적 완성도가 높은 비즈니스 모델을 창출하고 싶다.
